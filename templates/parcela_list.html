{% extends 'base.html' %}

{% load humanize %} 

{% block title %}{% endblock %}

{% block content %}
<div class="container-fluid">
   
    <div class="col-lg-11">
        <!-- <h1 parcelas</h1> -->

        <table id="parcelas_table" class="display">

            <thead>
                <tr>
                    <th>NÃºmero Pedido</th>
                    <th>Nome Cliente</th>
                    <th>Parcela</th>
                    <th>Data Vencimento</th>
                    <th>Status</th>
                    <th>Valor</th>
                    <th>Editar</th>
                </tr>
            </thead>

            <tbody>

                {% for parcela in parcelas %}
                    <tr>
                        <td>{{ parcela.num_pedido }}</td>
                        <td>{{ parcela.nome_cliente }}</td>
                        <td>{{ parcela.parcela }}</td>
                        <td>{{ parcela.data_vencimento|date:"d/m/Y" }}</td>
                        <td>{{ parcela.status }}</td>
                        <td>{{ parcela.valor|floatformat:2 }}</td>
                        <td><a href="{% url 'update_parcela' parcela.id %}"><button type="submit" class="btn btn-primary">Editar</button></a></td>
                    </tr>
                {% endfor %}

            </tbody>
        </table>
    </div>
</div>


<script>
   $(document).ready(function() {
    var dt = $('#parcelas_table').DataTable({
    //     searchPanes:{
    //         // cascadePanes: true,
    //         collapse: true,
    //         viewTotal: true,
    //         columns: [4]
    //     },
    
    // dom: 'Pfrtip',


    initComplete: function () {
      this.api().columns(4).every( function () {
        var column = this;
        var select = $('<select><option value=""></option></select>')
          .appendTo( $(column.header()) )
          .on( 'change', function () {
            var val = $.fn.dataTable.util.escapeRegex(
              $(this).val()
            );
 
            column
              .search( val ? '^'+val+'$' : '', true, false )
              .draw();
          } );
 
        column.data().unique().sort().each( function ( d, j ) {
          select.append( '<option value="'+d+'">'+d+'</option>' )
        } );
      } );
    }

    });
});
    

</script>
{% endblock %}